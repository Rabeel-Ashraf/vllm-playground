# vLLM CPU Configuration for Apple Silicon (macOS)
# Based on: https://docs.vllm.ai/en/stable/getting_started/installation/cpu.html

# KV Cache Space (in GB) - Larger values support more concurrent requests
# Default is 4, recommended 40 for better performance
export VLLM_CPU_KVCACHE_SPACE=40

# CPU Thread Binding - 'auto' is recommended for most cases
# This optimizes OpenMP thread binding to CPU cores
export VLLM_CPU_OMP_THREADS_BIND=auto

# Optional: Number of reserved CPUs for vLLM frontend (recommended when serving)
# Uncomment if you want to manually reserve CPU cores
# export VLLM_CPU_NUM_OF_RESERVED_CPU=1

# Optional: Disable certain CPU optimizations if they cause issues on Apple Silicon
# Uncomment these if you experience segmentation faults
# export VLLM_CPU_MOE_PREPACK=0
# export VLLM_CPU_SGL_KERNEL=0
